(function(l,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(l=typeof globalThis<"u"?globalThis:l||self,a(l.AiSearchWebComponents={}))})(this,function(l){"use strict";var Nt=Object.defineProperty;var At=(l,a,h)=>a in l?Nt(l,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):l[a]=h;var $=(l,a,h)=>At(l,typeof a!="symbol"?a+"":a,h);function a(){}function h(e){return e()}function v(){return Object.create(null)}function E(e){e.forEach(h)}function M(e){return typeof e=="function"}function B(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function nt(e){return Object.keys(e).length===0}function st(e,...t){if(e==null){for(const s of t)s(void 0);return a}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function R(e,t,n){e.$$.on_destroy.push(st(t,n))}function _(e,t){e.appendChild(t)}function rt(e,t,n){const s=it(e);if(!s.getElementById(t)){const i=p("style");i.id=t,i.textContent=n,ot(s,i)}}function it(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ot(e,t){return _(e.head||e,t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function ct(){return j(" ")}function ut(){return j("")}function q(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ft(e){return Array.from(e.childNodes)}function J(e,t){t=""+t,e.data!==t&&(e.data=t)}function at(e){const t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}let S;function x(e){S=e}function lt(){if(!S)throw new Error("Function called outside component initialization");return S}function $t(e){lt().$$.on_mount.push(e)}const b=[],z=[];let g=[];const I=[],dt=Promise.resolve();let P=!1;function ht(){P||(P=!0,dt.then(O))}function L(e){g.push(e)}const T=new Set;let m=0;function O(){if(m!==0)return;const e=S;do{try{for(;m<b.length;){const t=b[m];m++,x(t),_t(t.$$)}}catch(t){throw b.length=0,m=0,t}for(x(null),b.length=0,m=0;z.length;)z.pop()();for(let t=0;t<g.length;t+=1){const n=g[t];T.has(n)||(T.add(n),n())}g.length=0}while(b.length);for(;I.length;)I.pop()();P=!1,T.clear(),x(e)}function _t(e){if(e.fragment!==null){e.update(),E(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}function pt(e){const t=[],n=[];g.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),g=t}const C=new Set;let bt;function D(e,t){e&&e.i&&(C.delete(e),e.i(t))}function gt(e,t,n,s){if(e&&e.o){if(C.has(e))return;C.add(e),bt.c.push(()=>{C.delete(e)}),e.o(t)}}function mt(e){e&&e.c()}function H(e,t,n){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),L(()=>{const r=e.$$.on_mount.map(h).filter(M);e.$$.on_destroy?e.$$.on_destroy.push(...r):E(r),e.$$.on_mount=[]}),i.forEach(L)}function V(e,t){const n=e.$$;n.fragment!==null&&(pt(n.after_update),E(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(e,t){e.$$.dirty[0]===-1&&(b.push(e),ht(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function F(e,t,n,s,i,r,o=null,u=[-1]){const f=S;x(e);const c=e.$$={fragment:null,ctx:[],props:r,update:a,not_equal:i,bound:v(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:v(),dirty:u,skip_bound:!1,root:t.target||f.$$.root};o&&o(c.root);let A=!1;if(c.ctx=n?n(e,t.props||{},(d,Z,...tt)=>{const et=tt.length?tt[0]:Z;return c.ctx&&i(c.ctx[d],c.ctx[d]=et)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](et),A&&yt(e,d)),Z}):[],c.update(),A=!0,E(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const d=ft(t.target);c.fragment&&c.fragment.l(d),d.forEach(w)}else c.fragment&&c.fragment.c();t.intro&&D(e.$$.fragment),H(e,t.target,t.anchor),O()}x(f)}let G;typeof HTMLElement=="function"&&(G=class extends HTMLElement{constructor(t,n,s){super();$(this,"$$ctor");$(this,"$$s");$(this,"$$c");$(this,"$$cn",!1);$(this,"$$d",{});$(this,"$$r",!1);$(this,"$$p_d",{});$(this,"$$l",{});$(this,"$$l_u",new Map);this.$$ctor=t,this.$$s=n,s&&this.attachShadow({mode:"open"})}addEventListener(t,n,s){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){const i=this.$$c.$on(t,n);this.$$l_u.set(n,i)}super.addEventListener(t,n,s)}removeEventListener(t,n,s){if(super.removeEventListener(t,n,s),this.$$c){const i=this.$$l_u.get(n);i&&(i(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return()=>{let o;return{c:function(){o=p("slot"),r!=="default"&&q(o,"name",r)},m:function(c,A){k(c,o,A)},d:function(c){c&&w(o)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const n={},s=at(this);for(const r of this.$$s)r in s&&(n[r]=[t(r)]);for(const r of this.attributes){const o=this.$$g_p(r.name);o in this.$$d||(this.$$d[o]=N(o,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$scope:{ctx:[]}}});const i=()=>{this.$$r=!0;for(const r in this.$$p_d)if(this.$$d[r]=this.$$c.$$.ctx[this.$$c.$$.props[r]],this.$$p_d[r].reflect){const o=N(r,this.$$d[r],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[r].attribute||r):this.setAttribute(this.$$p_d[r].attribute||r,o)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(const r in this.$$l)for(const o of this.$$l[r]){const u=this.$$c.$on(r,o);this.$$l_u.set(o,u)}this.$$l={}}}attributeChangedCallback(t,n,s){var i;this.$$r||(t=this.$$g_p(t),this.$$d[t]=N(t,s,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function N(e,t,n,s){var r;const i=(r=n[e])==null?void 0:r.type;if(t=i==="Boolean"&&typeof t!="boolean"?t!=null:t,!s||!n[e])return t;if(s==="toAttribute")switch(i){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(i){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function W(e,t,n,s,i,r){let o=class extends G{constructor(){super(e,n,i),this.$$p_d=t}static get observedAttributes(){return Object.keys(t).map(u=>(t[u].attribute||u).toLowerCase())}};return Object.keys(t).forEach(u=>{Object.defineProperty(o.prototype,u,{get(){return this.$$c&&u in this.$$c?this.$$c[u]:this.$$d[u]},set(f){var c;f=N(u,f,t),this.$$d[u]=f,(c=this.$$c)==null||c.$set({[u]:f})}})}),s.forEach(u=>{Object.defineProperty(o.prototype,u,{get(){var f;return(f=this.$$c)==null?void 0:f[u]}})}),e.element=o,o}class K{constructor(){$(this,"$$");$(this,"$$set")}$destroy(){V(this,1),this.$destroy=a}$on(t,n){if(!M(n))return a;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!nt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const wt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wt);const y=[];function St(e,t=a){let n;const s=new Set;function i(u){if(B(e,u)&&(e=u,n)){const f=!y.length;for(const c of s)c[1](),y.push(c,e);if(f){for(let c=0;c<y.length;c+=2)y[c][0](y[c+1]);y.length=0}}}function r(u){i(u(e))}function o(u,f=a){const c=[u,f];return s.add(c),s.size===1&&(n=t(i,r)||a),u(e),()=>{s.delete(c),s.size===0&&n&&(n(),n=null)}}return{set:i,update:r,subscribe:o}}const xt=async({apiBaseUrl:e,language:t="en"})=>{let n=`${e}/search/start`;const s=new URLSearchParams;return t&&s.append("l",t),s.toString()&&(n+=`?${s.toString()}`),await(await fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}})).json()},U=(()=>{const{set:e,update:t,subscribe:n}=St();return{subscribe:n,set:e,update:t,start:async({apiBaseUrl:s,language:i})=>{if(!s)throw new Error("apiBaseUrl is required");const r=await xt({apiBaseUrl:s,language:i});return e(r),r}}})();function Q(e){let t,n,s=e[0].session+"",i;return{c(){t=p("div"),n=p("pre"),i=j(s)},m(r,o){k(r,t,o),_(t,n),_(n,i)},p(r,o){o&1&&s!==(s=r[0].session+"")&&J(i,s)},d(r){r&&w(t)}}}function Et(e){let t,n=e[0]&&Q(e);return{c(){n&&n.c(),t=ut()},m(s,i){n&&n.m(s,i),k(s,t,i)},p(s,[i]){s[0]?n?n.p(s,i):(n=Q(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:a,o:a,d(s){s&&w(t),n&&n.d(s)}}}function kt(e,t,n){let s;return R(e,U,i=>n(0,s=i)),[s]}class X extends K{constructor(t){super(),F(this,t,kt,Et,B,{})}}W(X,{},[],[],!0);function jt(e){rt(e,"svelte-aryroy",".ai-search-container.svelte-aryroy{padding:0.5rem;border:1px solid #ccc}")}function Ot(e){let t,n,s=JSON.stringify(e[0],null,2)+"",i,r,o,u;return o=new X({}),{c(){t=p("div"),n=p("pre"),i=j(s),r=ct(),mt(o.$$.fragment),q(t,"class","ai-search-container svelte-aryroy")},m(f,c){k(f,t,c),_(t,n),_(n,i),_(t,r),H(o,t,null),u=!0},p(f,[c]){(!u||c&1)&&s!==(s=JSON.stringify(f[0],null,2)+"")&&J(i,s)},i(f){u||(D(o.$$.fragment,f),u=!0)},o(f){gt(o.$$.fragment,f),u=!1},d(f){f&&w(t),V(o)}}}function Ct(e,t,n){let s;R(e,U,o=>n(0,s=o));let{apiBaseUrl:i}=t,{language:r}=t;return $t(async()=>{await U.start({apiBaseUrl:i,language:r})}),e.$$set=o=>{"apiBaseUrl"in o&&n(1,i=o.apiBaseUrl),"language"in o&&n(2,r=o.language)},[s,i,r]}class Y extends K{constructor(t){super(),F(this,t,Ct,Ot,B,{apiBaseUrl:1,language:2},jt)}get apiBaseUrl(){return this.$$.ctx[1]}set apiBaseUrl(t){this.$$set({apiBaseUrl:t}),O()}get language(){return this.$$.ctx[2]}set language(t){this.$$set({language:t}),O()}}customElements.define("stg-ai-search-container",W(Y,{apiBaseUrl:{reflect:!0,type:"String",attribute:"api-base-url"},language:{reflect:!0,type:"String",attribute:"language"}},[],[],!0)),l.AiSearchContainer=Y,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
